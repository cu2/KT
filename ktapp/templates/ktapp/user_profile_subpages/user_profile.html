{% extends "ktapp/user_profile_subpages/user_profile_base.html" %}
{% load kt_extras %}

{% block user_profile_main %}

    <div class="left_content">

        {% if selected_user.id == user.id %}
            <p>
                Nemed:
                {% if selected_user.gender == 'M' %}
                    férfi
                {% elif selected_user.gender == 'F' %}
                    nő
                {% else %}
                    <i>nem adtad meg</i>
                {% endif %}
                <br />
                Születési éved:
                {% if selected_user.year_of_birth %}
                    {{ selected_user.year_of_birth }}
                {% else %}
                    <i>nem adtad meg</i>
                {% endif %}
                <br />
                Lakhelyed:
                {% if selected_user.location %}
                    {{ selected_user.location }}
                {% else %}
                    <i>nem adtad meg</i>
                {% endif %}
                <br />
                Regisztrációd: {{ selected_user.date_joined|date:"Y. F j." }} ({{ selected_user.date_joined|timesince }})
            </p>
        {% else %}
            <p>
                Nem: {% if selected_user.public_gender %}
                    {% if selected_user.gender == 'M' %}
                        férfi
                    {% elif selected_user.gender == 'F' %}
                        nő
                    {% else %}
                        <i>?</i>
                    {% endif %}
                {% else %}<i>nem publikus</i>{% endif %}<br />
                Születési év: {% if selected_user.public_year_of_birth %}
                    {% if selected_user.year_of_birth %}
                        {{ selected_user.year_of_birth }}
                    {% else %}
                        <i>?</i>
                    {% endif %}
                {% else %}<i>nem publikus</i>{% endif %}<br />
                Lakhely: {% if selected_user.public_location %}
                    {% if selected_user.location %}
                        {{ selected_user.location }}
                    {% else %}
                        <i>?</i>
                    {% endif %}
                {% else %}<i>nem publikus</i>{% endif %}<br />
                Regisztráció: {{ selected_user.date_joined|date:"Y. F j." }} ({{ selected_user.date_joined|timesince }})
            </p>
        {% endif %}

        {% if selected_user.id == user.id and user.validated_email %}
            <p><a href="{% url 'change_password' %}">Jelszó módosítása</a></p>
            <div class="mobilemenu">
                <form action="{% url 'logout' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="next" value="{{ request.build_absolute_uri }}" />
                    <p><input type="submit" value="Kijelentkezés" class="small_button" /></p>
                </form>
            </div>
        {% endif %}

        <h2>Legutóbbi szavazat{% if selected_user.id == user.id %}aid{% else %}ok{% endif %}</h2>
        <table>
            <tr class="header_tr">
                <th>Film</th>
                <th>Szavazat</th>
                <th>Mikor</th>
                <th>Átlag</th>
            </tr>
        {% for vote in latest_votes %}
            <tr class="{% cycle '' 'odd' %}">
                <td>{{ vote.film|film_url_html }}</td>
                <td class="center">{{ vote.rating }}</td>
                <td class="center">{{ vote.when|date:"Y-m-d" }}</td>
                <td class="center">{{ vote.film|film_rating_html }}</td>
            </tr>
        {% endfor %}
        </table>

    </div>
    <div class="right_content">

        <h2>Legutóbbi komment{% if selected_user.id == user.id %}jeid{% else %}ek{% endif %}</h2>
        {% if latest_comments %}
            {% for c in latest_comments %}
                {% include 'ktapp/blocks/comment_block.html' with comment=c show_comment_source=True %}
            {% endfor %}
        {% endif %}

    </div>
    <br class="clear" />

{% endblock %}
