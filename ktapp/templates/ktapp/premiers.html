{% extends "ktapp/layout.html" %}
{% load kt_extras %}

{% block title %}Filmbemutatók - Kritikus Tömeg{% endblock %}

{% block header %}
    <h1>Filmbemutatók</h1>
{% endblock %}

{% block main %}

    <div class="left_content">
        <h2>Mostanában</h2>
        {% for premier_day, premier_films in premier_list %}
            <h3>{{ premier_day|date:"F j."|title }}</h3>
            {% for film in premier_films %}
                <div class="film_block">
                    {% if film.main_poster %}
                        <a href="{% url 'film_main' film.id film.slug_cache %}" title="{{ film.orig_title }} ({{ film.year }})"><img src="{{ film.main_poster.get_display_urls.mid }}" class="picture film_block_picture" alt="{{ film.orig_title }} ({{ film.year }})" /></a>
                    {% endif %}
                    <p class="film_block_content">
                        <b><a href="{% url 'film_main' film.id film.slug_cache %}">{{ film.orig_title }}</a></b><br />
                        {% if film.second_title %}{{ film.second_title }}<br />{% endif %}
                        ({% for director in film.directors %}<a href="{% url 'artist' director.id director.slug_cache %}">{{ director.name }}</a>{% if not forloop.last %}, {% endif %}{% endfor %})
                        <br />
                        {% for country in film.countries %}{{ country.name }}{% if not forloop.last %}-{% endif %}{% endfor %}
                        {% for genre in film.genres %}{{ genre.name }}{% if not forloop.last %}, {% endif %}{% endfor %}
                    </p>
                    <p class="film_block_content">
                        {{ film.plot_summary }}
                    </p>
                    <br class="clear" />
                </div>
            {% endfor %}
        {% endfor %}
    </div>
    <div class="right_content">
        <h2>Idén</h2>
        <table class="fullsize sortable">
            <thead>
                <tr class="header_tr">
                    <th data-sort="string">Bemutató</th>
                    <th data-sort="string">Film</th>
                    <th data-sort="float" data-sort-default="desc">Átlag</th>
                    <th data-sort="int" data-sort-default="desc">Szavazatszám</th>
                </tr>
            </thead>
            <tbody>
            {% for film in premier_list_full %}
                <tr class="{% cycle '' 'odd' %}">
                    <td data-sort-value="{{ film.main_premier|date:"Y-m-d" }}">{{ film.main_premier|date:"F j." }}</td>
                    <td>{{ film|film_url_html_w_year }}</td>
                    <td class="center" data-sort-value="{{ film|film_rating_sort_value }}">{{ film|film_avg_rating_html }}</td>
                    <td class="center" data-sort-value="{{ film.number_of_ratings }}">{{ film|film_num_rating_html }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <br class="clear" />

{% endblock %}
